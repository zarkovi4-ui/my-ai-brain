<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Assistant - Second Brain</title>
    <style>
        :root { --bg: #f0f2f5; --primary: #007AFF; --text: #1c1e21; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

        /* –ì–æ—Ä–Ω–∞ –ª–µ–Ω—Ç–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .header-tabs { display: flex; background: white; padding: 10px; gap: 8px; overflow-x: auto; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .tab { padding: 8px 16px; background: #eee; border-radius: 20px; font-size: 13px; font-weight: bold; cursor: pointer; white-space: nowrap; border: none; }
        .tab.active { background: var(--primary); color: white; }

        /* –ß–∞—Ç –∑–æ–Ω–∞ */
        #chat-container { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .msg { max-width: 80%; padding: 12px; border-radius: 18px; font-size: 15px; line-height: 1.4; position: relative; }
        .user-msg { align-self: flex-end; background: var(--primary); color: white; border-bottom-right-radius: 4px; }
        .ai-msg { align-self: flex-start; background: white; color: var(--text); border-bottom-left-radius: 4px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .msg-tag { font-size: 10px; text-transform: uppercase; margin-bottom: 4px; display: block; opacity: 0.7; }

        /* –í—Ö–æ–¥–Ω–∞ –∑–æ–Ω–∞ */
        .input-area { background: white; padding: 15px; display: flex; gap: 10px; align-items: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
        #user-input { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 25px; outline: none; font-size: 16px; }
        .action-btn { background: none; border: none; font-size: 24px; cursor: pointer; padding: 5px; }
        #mic-btn { color: #ea4335; }
        #send-btn { color: var(--primary); }
    </style>
</head>
<body>

<div class="header-tabs">
    <button class="tab active" onclick="filter('all')">–í—Å–∏—á–∫–æ</button>
    <button class="tab" onclick="filter('note')">üìù –ë–µ–ª–µ–∂–∫–∏</button>
    <button class="tab" onclick="filter('todo')">‚úÖ –ó–∞–¥–∞—á–∏</button>
    <button class="tab" onclick="filter('money')">üí∞ –ë—é–¥–∂–µ—Ç</button>
</div>

<div id="chat-container">
    <div class="msg ai-msg">
        <span class="msg-tag">–°–∏—Å—Ç–µ–º–∞</span>
        –ó–¥—Ä–∞–≤–µ–π! –ê–∑ —Å—ä–º —Ç–≤–æ—è—Ç –≤—Ç–æ—Ä–∏ –º–æ–∑—ä–∫. –ö–∞–∂–∏ –º–∏ –∫–∞–∫–≤–æ –∏—Å–∫–∞—à –¥–∞ –∑–∞–ø–æ–º–Ω–∏—à –∏–ª–∏ –∑–∞–ø–∏—à–∏ —Ä–∞–∑—Ö–æ–¥.
    </div>
</div>

<div class="input-area">
    <button class="action-btn" id="mic-btn" onclick="startVoice()">üéôÔ∏è</button>
    <input type="text" id="user-input" placeholder="–ù–∞–ø–∏—à–∏ –Ω–µ—â–æ...">
    <button class="action-btn" id="send-btn" onclick="sendMessage()">üöÄ</button>
</div>

<script type="module">
    // –¢—É–∫ —â–µ –≤–≥—Ä–∞–¥–∏–º —Ç–≤–æ—è Firebase Config –ø–æ-–∫—ä—Å–Ω–æ
    // –ó–∞ –º–æ–º–µ–Ω—Ç–∞ –æ—Å—Ç–∞–≤—è–º–µ —Å–∞–º–æ –ª–æ–≥–∏–∫–∞—Ç–∞ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    
    window.sendMessage = () => {
        const input = document.getElementById('user-input');
        if (!input.value) return;
        
        addMessage(input.value, 'user');
        // –¢—É–∫ —â–µ –¥–æ–±–∞–≤–∏–º –ª–æ–≥–∏–∫–∞—Ç–∞ –∑–∞ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞–Ω–µ –æ—Ç AI
        processInput(input.value);
        
        input.value = '';
    };

    window.addMessage = (text, type, tag = "–ú–∏—Å–ª–∏") => {
        const container = document.getElementById('chat-container');
        const div = document.createElement('div');
        div.className = `msg ${type}-msg`;
        div.innerHTML = `<span class="msg-tag">${tag}</span>${text}`;
        container.appendChild(div);
        container.scrollTop = container.scrollHeight;
    };

    window.processInput = (text) => {
        // –ü—Ä–æ—Å—Ç–∞ –ª–æ–≥–∏–∫–∞ –∑–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è, –¥–æ–∫–∞—Ç–æ —Å–≤—ä—Ä–∂–µ–º AI
        setTimeout(() => {
            if (text.includes('–ª–≤') || text.includes('–ø–∞—Ä–∏')) {
                addMessage("–ó–∞–ø–∏—Å–∞—Ö —Ä–∞–∑—Ö–æ–¥–∞ –≤ —Å–µ–∫—Ü–∏—è –ë—é–¥–∂–µ—Ç. ‚úÖ", 'ai', '–ë—é–¥–∂–µ—Ç');
            } else if (text.includes('–∫—É–ø–∏') || text.includes('–Ω–∞–ø–æ–º–Ω–∏')) {
                addMessage("–î–æ–±–∞–≤–∏—Ö –≥–æ –≤ –∑–∞–¥–∞—á–∏—Ç–µ —Ç–∏. üîî", 'ai', '–ù–∞–ø–æ–º–Ω—è–Ω–µ');
            } else {
                addMessage("–ó–∞–ø–æ–º–Ω–∏—Ö —Ç–∞–∑–∏ –±–µ–ª–µ–∂–∫–∞. üìù", 'ai', '–ë–µ–ª–µ–∂–∫–∞');
            }
        }, 800);
    };

    // Voice to Data (Speech Recognition)
    window.startVoice = () => {
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'bg-BG';
        recognition.start();
        
        document.getElementById('mic-btn').style.opacity = '0.3';
        
        recognition.onresult = (event) => {
            const speechToText = event.results[0][0].transcript;
            document.getElementById('user-input').value = speechToText;
            document.getElementById('mic-btn').style.opacity = '1';
            sendMessage();
        };
        
        recognition.onerror = () => {
            document.getElementById('mic-btn').style.opacity = '1';
            alert("–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –≥–ª–∞—Å–æ–≤–æ—Ç–æ –≤—ä–≤–µ–∂–¥–∞–Ω–µ.");
        };
    };
</script>

</body>
</html>
